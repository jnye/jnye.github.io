<!DOCTYPE html>
<html><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-5JP43RV35Z"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-5JP43RV35Z');
    </script>
    
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;600;700;800&family=Frank+Ruhl+Libre:wght@200;300;400;500;600&family=Encode+Sans+Semi+Condensed:wght@400&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/all.min.css">
    <link disabled id="dark-mode-theme" rel="stylesheet" href="/css/dark.css">
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <link rel="stylesheet" type="text/css" href="/css/my_style.css">
    
    
    
    <title>My Digital Garden | Active Record vs. Data Mapper: Navigating PHP ORM Patterns with Eloquent and Doctrine</title>
    <meta name="description" content="Comparing and contrasting the Active Record and Data Mapper patterns, as implemented in PHP by Eloquent and Doctrine ORM respectively, highlighting their different approaches to managing data persistence and the pros and cons of each.">
</head><body><nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
        <a class="navbar-brand" href="/">
            
            <b style="font-weight: 800;">JN</b>
            
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav ms-auto mt-2 mt-lg-0"><li class='nav-item '>
                    <a class="nav-link" href="/garden/"> Digital Garden</a>
                </li>
            <li class='nav-item '>
                    <a class="nav-link" href="/projects/"> Projects</a>
                </li>
            <li class='nav-item '>
                    <a class="nav-link" href="/library/"> Library</a>
                </li>
            <li class='nav-item '>
                    <a class="nav-link" href="/about/"> About</a>
                </li>
             
            <li class="nav-item px-2 pt-1">
                <a class="btn fas fa-moon" id="dark-mode-toggle"></a>
            </li>
            </ul>
        </div>
    </div>
</nav><div id="content">

<div class="container" style="max-width: 800px;">
    <div class="py-4 rounded-3">
        <div class="container-fluid py-2">
            <h1 class="display-2 mb-4 text-center">Active Record vs. Data Mapper: Navigating PHP ORM Patterns with Eloquent and Doctrine</h1>
        </div>
        
        <p class="text-center fs-4 fst-italic serif">Comparing and contrasting the Active Record and Data Mapper patterns, as implemented in PHP by Eloquent and Doctrine ORM respectively, highlighting their different approaches to managing data persistence and the pros and cons of each.</p>
        
        <div class="text-center pt-4">
            
        </div>
    </div>
    <div class="row justify-content-center mb-5">
        <div class="col-12">
            <p class="card-date m-0">
                
                
                    Created Jul 22, 2022 - 
                
                Last updated: Jul 22, 2022
            </p>
            <hr class="dropdown-divider">
            <div class="row justify-content-between">
                <div class="col-sm-4">
                    
    
    <span class="status">Growing ðŸŒ¿</span>
    

                </div>
                <div class="col-sm-8" style="text-align: right;">
                    
                
                    
                    <span class="badge tag-badge">orm</span>
                    
                    <span class="badge tag-badge">php</span>
                    
                    <span class="badge tag-badge">eloquent</span>
                    
                    <span class="badge tag-badge">doctrine</span>
                    
                
                
                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid py-2">
        <div class="serif main-content">
            <p>Hello there, fellow developers! Today, we are going to discuss two prevalent ORM (Object-Relational Mapping) design patterns used in PHP - Active Record and Data Mapper. Specifically, we&rsquo;ll explore how these patterns are implemented in <a href="https://laravel.com/docs/10.x/eloquent">Eloquent ORM</a> and <a href="https://www.doctrine-project.org/">Doctrine ORM</a>, respectively. Both these patterns serve the same purpose of persisting your data, but their approaches differ quite a bit.</p>
<h2 id="active-record-pattern">Active Record Pattern</h2>
<p>In the Active Record pattern, an object instance is tied directly to a single row in the database table. The object itself contains the functionality to insert, update, delete, and retrieve rows from the table. It&rsquo;s like your data row got up, started walking, and interacting with the database all by itself.</p>
<p>Eloquent ORM is an implementation of the Active Record pattern. Here&rsquo;s an example:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#111">$invoice</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#75af00">Invoice</span><span style="color:#111">();</span>
<span style="color:#111">$invoice</span><span style="color:#f92672">-&gt;</span><span style="color:#75af00">customerName</span> <span style="color:#f92672">=</span> <span style="color:#d88200">&#39;John Doe&#39;</span><span style="color:#111">;</span>
<span style="color:#111">$invoice</span><span style="color:#f92672">-&gt;</span><span style="color:#75af00">email</span> <span style="color:#f92672">=</span> <span style="color:#d88200">&#39;john@example.com&#39;</span><span style="color:#111">;</span>
<span style="color:#111">$invoice</span><span style="color:#f92672">-&gt;</span><span style="color:#75af00">save</span><span style="color:#111">();</span>
</code></pre></div><p>In the example above, the Invoice model instance is directly responsible for saving the data to the database. The same model can also be used to fetch data:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#111">$invoice</span> <span style="color:#f92672">=</span> <span style="color:#75af00">Invoice</span><span style="color:#f92672">::</span><span style="color:#75af00">find</span><span style="color:#111">(</span><span style="color:#ae81ff">1843</span><span style="color:#111">);</span>
<span style="color:#00a8c8">print</span> <span style="color:#111">$invoice</span><span style="color:#f92672">-&gt;</span><span style="color:#75af00">customerName</span><span style="color:#111">;</span>
</code></pre></div><h3 id="pros-and-cons-of-active-record">Pros and Cons of Active Record</h3>
<p>The Active Record pattern is straightforward and easy to understand, which makes it great for small to medium-sized applications. However, it tightly couples your domain logic with your data access, which can lead to bloated models and become problematic as your application grows.</p>
<h2 id="data-mapper-pattern">Data Mapper Pattern</h2>
<p>On the other hand, the Data Mapper pattern separates the in-memory objects from the database completely. The Data Mapper is responsible for moving data between objects and the database while keeping them independent of each other.</p>
<p>Doctrine ORM, widely used in Symfony, implements the Data Mapper pattern. Here&rsquo;s an example:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#111">$invoice</span> <span style="color:#f92672">=</span> <span style="color:#00a8c8">new</span> <span style="color:#75af00">Invoice</span><span style="color:#111">();</span>
<span style="color:#111">$invoice</span><span style="color:#f92672">-&gt;</span><span style="color:#75af00">setCustomerName</span><span style="color:#111">(</span><span style="color:#d88200">&#39;John Doe&#39;</span><span style="color:#111">);</span>
<span style="color:#111">$invoice</span><span style="color:#f92672">-&gt;</span><span style="color:#75af00">setEmail</span><span style="color:#111">(</span><span style="color:#d88200">&#39;john@example.com&#39;</span><span style="color:#111">);</span>

<span style="color:#111">$entityManager</span> <span style="color:#f92672">=</span> <span style="color:#75af00">EntityManager</span><span style="color:#f92672">::</span><span style="color:#75af00">create</span><span style="color:#111">(</span><span style="color:#111">$dbParams</span><span style="color:#111">,</span> <span style="color:#111">$config</span><span style="color:#111">);</span>
<span style="color:#111">$entityManager</span><span style="color:#f92672">-&gt;</span><span style="color:#75af00">persist</span><span style="color:#111">(</span><span style="color:#111">$invoice</span><span style="color:#111">);</span>
<span style="color:#111">$entityManager</span><span style="color:#f92672">-&gt;</span><span style="color:#75af00">flush</span><span style="color:#111">();</span>
</code></pre></div><p>In this case, the Invoice model is not aware of the database. It&rsquo;s the EntityManager that handles saving objects to the database.</p>
<p>Retrieving data is also done via the EntityManager:</p>
<div class="highlight"><pre tabindex="0" style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#111">$entityManager</span> <span style="color:#f92672">=</span> <span style="color:#75af00">EntityManager</span><span style="color:#f92672">::</span><span style="color:#75af00">create</span><span style="color:#111">(</span><span style="color:#111">$dbParams</span><span style="color:#111">,</span> <span style="color:#111">$config</span><span style="color:#111">);</span>
<span style="color:#111">$invoice</span> <span style="color:#f92672">=</span> <span style="color:#111">$entityManager</span><span style="color:#f92672">-&gt;</span><span style="color:#75af00">find</span><span style="color:#111">(</span><span style="color:#d88200">&#39;Invoice&#39;</span><span style="color:#111">,</span> <span style="color:#ae81ff">1843</span><span style="color:#111">);</span>
<span style="color:#00a8c8">print</span> <span style="color:#111">$invoice</span><span style="color:#f92672">-&gt;</span><span style="color:#75af00">getCustomerName</span><span style="color:#111">();</span>
</code></pre></div><h3 id="pros-and-cons-of-data-mapper">Pros and Cons of Data Mapper</h3>
<p>The Data Mapper pattern allows for a clean separation of concerns, which can make your codebase easier to maintain, especially for larger applications. However, it comes with a steeper learning curve and can be overkill for simple applications or prototypes.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Both the Active Record and Data Mapper patterns have their merits and demerits. The choice between them depends heavily on the requirements of your application. If you need a simple, fast solution and are not concerned about strict separation of concerns, Eloquent with its Active Record implementation might be the way to go. On the other hand, if you&rsquo;re building a large, complex system where you want to keep your domain logic separate from your persistence logic, Doctrine with its Data Mapper implementation would be a solid choice.</p>
<p>Until next time, happy coding!</p>

        </div>
    </div>
</div>


        </div><div class="container">
    <div class="row justify-content-between">
        <div class="col-sm-4">
            <p class="footer">Joshua Nye Â© 2023 </p>
        </div>
        <div class="col-sm-6 d-flex flex-row-reverse">
            
            <a class="footer-social px-2"  href="https://www.github.com/jnye" target="_blank"><i class="fab fa-github"></i></a>
            
            <a class="footer-social px-2"  href="https://www.linkedin.com/in/joshua-nye/" target="_blank"><i class="fab fa-linkedin-in"></i></a>
            
        </div>
    </div>
</div>
<script src="/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/js/jquery.min.js"></script>
<script src="/js/isotope.pkgd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha384-GNFwBvfVxBkLMJpYMOABq3c+d3KnQxudP/mGPkzpZSTYykLBNsZEnG2D9G/X/+7D" crossorigin="anonymous" async></script>
<script src="/js/dark.js"></script>
<script src="/js/isotope.js"></script>
<script src="/js/mermaid.min.js"></script>
<script>mermaid.initialize({ startOnLoad: true, securityLevel: 'loose'});</script></body>
</html>
